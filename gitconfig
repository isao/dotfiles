[user]
    name = Isao Yagi
    email = isao.yagi@gmail.com

[core]
    ;pager = less -R
    excludesfile = ~/.gitignore
    quotepath = false

    autocrlf = input

    ; tell git that trailing cr is ok, ignore in diffs et al
    whitespace = cr-at-eol

	; https://news.ycombinator.com/item?id=11388479
	untrackedCache = true

[pager]
    ;diff = diff-so-fancy | less --tabs=4 -RFX
    ;show = diff-so-fancy | less --tabs=4 -RFX

[pack]
    ;use all cpu cores
    threads = 0

[push]
    default = current

[credential]
    ;for https git uris w/ auth
    helper = osxkeychain

[alias]
    ; open all unique remote urls in a browser
    ;open = !open `git remote -v|perl -ne'm~([\\w.-]+\\.com)[:/](\\S+)\\.git~,print qq(http://$1/$2\n)'|uniq`

    ; open tfs web interface for current branch
    web = !open  "http://tfsmr.mr.ericsson.se:8080/tfs/IEB/MRGIT/_git/ReachClient#version=GB$(git rev-parse --abbrev-ref HEAD)&_a=history"

    ; open a tfs pull request for the current branch against master
    pr = !open "http://tfsmr.mr.ericsson.se:8080/tfs/IEB/MRGIT/_git/ReachClient/pullrequests#targetRef=dev/master\\&_a=createnew\\&sourceRef=$(git rev-parse --abbrev-ref HEAD)"

    ; open the tfs task associated with the current branch
    task = !open "https://jira-fe-p01.mr.ericsson.se:8443/browse/MF-$(git rev-parse --abbrev-ref HEAD | egrep -o [0-9]+)"

    ; in every repo reachable from cwd, do fetch-all
    fetchcrazy = !"find . -type d -name .git -execdir git fetch --all -v \\;"

    ; in every repo reachable from cwd, do status and summarize results
    ; https://github.com/isao/shell/blob/master/git-statuscrazy.sh
    statuscrazy = !"find . -type d -name .git -execdir git-statuscrazy.sh \\;"

    ; After fetching, remove any remote-tracking branches which no longer exist on the remote.
    fu = fetch --prune

    ; http://stackoverflow.com/questions/3065650/whats-the-simplest-way-to-git-a-list-of-conflicted-files
    conflicts = "diff --name-only --diff-filter=U"

    ; fetch a github pull request: git pr <remote> <prnumber>
    ; @gnarf https://gist.github.com/piscisaureus/3342247#comment-817399
    ;pr = "!f() { git fetch $1 refs/pull/$2/head:pr/$2; } ; f"

    ; remote update & show heads (https://github.com/isao/git-heads)
    reup = !git remote update && git heads

    ; push to all remotes
    pub = !"for i in `git remote`; do echo $i...; git push -v $i; done"

    lf = log --graph --stat --decorate
    lg = log --format='%C(auto)%h %<(12,trunc)%an %s%d'

[github]
    user = isao
    password = !security find-generic-password -ws github.password

; bbedit
[diff]
    tool = bbdiff
    algorithm = histogram
    compactionHeuristic = true

[difftool]
    prompt = no
[difftool "bbdiff"]
    cmd = bbdiff --wait --resume "$LOCAL" "$REMOTE"
[alias]
    bbdiff = difftool

[merge]
    tool = opendiff
[mergetool]
    prompt = no
    keepBackup = false
[mergetool "bbdiff"]
    cmd = bbdiff --wait --resume "$LOCAL" "$REMOTE"
[alias]
    bbmerge = mergetool

[filter "lfs"]
    clean = git-lfs clean %f
    smudge = git-lfs smudge %f
    required = true
