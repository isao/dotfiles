[user]
    name = Isao Yagi
    email = isao@yahoo-inc.com

[core]
    pager = less -R
    excludesfile = ~/.gitignore
    quotepath = false

[color]
    ;colorize output on console
    ui = auto

[pack]
    ;use all cpu cores
    threads = 0

[push]
    default = current

[credential]
    ;for https git uris w/ auth
    helper = osxkeychain

[alias]
    ; open all unique remote urls in a browser
    open = !open `git remote -v|perl -ne'm~([\\w.-]+\\.com)[:/](\\S+)\\.git~,print qq(http://$1/$2\n)'|uniq`

    ; in every repo reachable from cwd, do fetch-all
    fetchcrazy = !"find . -type d -name .git -execdir git fetch --all -v \\;"

    ; in every repo reachable from cwd, do status and summarize results
    ; https://github.com/isao/shell/blob/master/git-statuscrazy.sh
    statuscrazy = !"find . -type d -name .git -execdir git-statuscrazy.sh \\;"

    ; After fetching, remove any remote-tracking branches which no longer exist on the remote.
    fu = fetch --prune

    ; fetch a github pull request: git pr <remote> <prnumber>
    ; @gnarf https://gist.github.com/piscisaureus/3342247#comment-817399
    pr = "!f() { git fetch $1 refs/pull/$2/head:pr/$2; } ; f"

    ; remote update & show heads (https://github.com/isao/git-heads)
    reup = !git remote update && git heads

    ; push to all remotes
    pub = !"for i in `git remote`; do echo $i...; git push -v $i; done"

    pull-rebase-no-ff = pull --rebase --no-ff
    lf = log --graph --stat
    lg = log --oneline --decorate

[github]
    user = isao
    password = !security find-generic-password -ws github.password

; bbedit
[diff]
    tool = bbdiff
    algorithm = patience
[difftool]
    prompt = no
[difftool "bbdiff"]
    cmd = bbdiff --wait --resume "$LOCAL" "$REMOTE"
[alias]
    bbdiff = difftool

[merge]
    tool = bbdiff
[mergetool]
    prompt = no
[mergetool "bbdiff"]
    cmd = bbdiff --wait --resume "$LOCAL" "$REMOTE"
[alias]
    bbmerge = mergetool


[tig]
    author-width = 3
    horizontal-scroll = 25%
    line-graphics = utf-8
    show-refs = yes
    show-rev-graph = yes
    tab-size = 2

[tig "bind"]
    ;allow escape to toggle between main and status views
    status = Escape view-main
    main = Escape view-status

    ;generic = < !git stash
    ;generic = > !git stash pop
    ;generic = ^p !git pull --rebase --no-ff

    ;bbdiff
    generic = 2 !git bbdiff

    ;open in bbedit
    generic = ^b !bbedit %(file)

    ;reveal current selection in a Finder window
    generic = ^f !open -R %(file)

    ;reveal current selection in a new Terminal window
    generic = ^t !newterm.sh %(directory)

    ;open in gitx
    generic = ^x !gitx -- %(file)

[difftool "sourcetree"]
    cmd = opendiff \"$LOCAL\" \"$REMOTE\"
    path =

[mergetool "sourcetree"]
    cmd = /Applications/SourceTree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
    trustExitCode = true
